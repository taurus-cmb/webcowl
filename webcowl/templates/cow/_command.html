{# Template for the cow command fragment. Not a standalone temlate #}

<div id="cow-command-view">
<nav>
    <ul class="breadcrumb_list">
    {% set home_route = url_for("cow.set_command", cmd_path="") %}
    <li class="cow_home"><button class="cow_command breadcrumb" data-on-click="@post('{{ home_route }}')">Home</button></li>
    {% for breadcrumb, path in breadcrumbs %}
        {% set breadcrumb_route = url_for("cow.set_command", cmd_path=path) %}
        <li><button class="cow_command breadcrumb" data-on-click="@post('{{ breadcrumb_route }}')">{{ breadcrumb }}</button></li>
    {% endfor %}
    </ul>
</nav>

{% if description|length > 0 %}
<p class="command_description">{{ description }}</p>
{% endif %}

{% if messages|length > 0 %}
<h2>Messages</h2>
<ul class="message_list">
    {% for message in messages %}
        <li>
            {# TODO use meta name for display, if present #}
            {% set message_route = url_for("cow.set_command", cmd_path=message.full_path) %}
            <button
                class="cow_command"
                data-on-click="@post('{{ message_route }}')"
                title="({{ message.name }}) {{ message.description }}"
            >{{ message.display_name }}</button>
        </li>
    {% endfor %}
</ul>
{% endif %}

{% if fields|length > 0 %}
<h2>Fields</h2>
<form class="command_form">
<ul class="field_list">
{% for field in fields %}
    <li><div class="command_field">
        <div class="label_input_row">
        <div class="field_label">
            <label for="{{ field.name }}">{{ field.display_name }}</label>
        </div>
        {% if field.is_enum %}
            <select id="{{ field.name }}">
                <option value="">Select...</option>
                {% for name, value in field.enum_values %}
                    <option value="{{ value }}">{{ name }}</option>
                {% endfor %}
            </select>
        {% else %}
            <input type="number" id="{{ field.name }}">
        {% endif %}
        </div>
        <span class="field_description">({{ field.name }}) {{ field.description }}</span>
    </div></li>
{% endfor %}
</ul>
</form>
{% endif %}

</div>
